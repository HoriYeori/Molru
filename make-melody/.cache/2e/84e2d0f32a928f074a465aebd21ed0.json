{"id":"node_modules/abcjs/src/write/abc_beam_element.js","dependencies":[{"name":"C:\\Users\\SSAFY\\Documents\\S06P22B107\\make-melody\\package.json","includedInParent":true,"mtime":1649031657578},{"name":"C:\\Users\\SSAFY\\Documents\\S06P22B107\\make-melody\\node_modules\\abcjs\\package.json","includedInParent":true,"mtime":1649031653004}],"generated":{"js":"//    abc_beam_element.js: Definition of the BeamElem class.\n\n// Most elements on the page are related to a particular absolute element -- notes, rests, bars, etc. Beams, however, span multiple elements.\n// This means that beams can't be laid out until the absolute elements are placed. There is the further complication that the stems for beamed\n// notes can't be laid out until the beams are because we don't know how long they will be until we know the slope of the beam and the horizontal\n// spacing of the absolute elements.\n//\n// So, when a beam is detected, a BeamElem is created, then all notes belonging to that beam are added to it. These notes are not given stems at that time.\n// Then, after the horizontal layout is complete, all of the BeamElem are iterated to set the beam position, then all of the notes that are beamed are given\n// stems. After that, we are ready for the drawing step.\n\n// There are three phases: the setup phase, when new elements are being discovered, the layout phase, when everything is calculated, and the drawing phase,\n// when the object is not changed, but is used to put the elements on the page.\n\n//\n// Setup phase\n//\nvar BeamElem = function BeamElem(stemHeight, type, flat, firstElement) {\n\t\t// type is \"grace\", \"up\", \"down\", or undefined. flat is used to force flat beams, as it commonly found in the grace notes of bagpipe music.\n\t\tthis.type = \"BeamElem\";\n\t\tthis.isflat = !!flat;\n\t\tthis.isgrace = !!(type && type === \"grace\");\n\t\tthis.forceup = !!(this.isgrace || (type && type === \"up\"));\n\t\tthis.forcedown = !!(type && type === \"down\");\n\t\tthis.elems = []; // all the AbsoluteElements that this beam touches. It may include embedded rests.\n\t\tthis.total = 0;\n\t\tthis.average = 6; // use middle line as start for average.\n\t\tthis.allrests = true;\n\t\tthis.stemHeight = stemHeight;\n\t\tthis.beams = []; // During the layout phase, this will become a list of the beams that need to be drawn.\n\t\tif (firstElement && firstElement.duration) {\n\t\t\tthis.duration = firstElement.duration;\n\t\t\tif (firstElement.startTriplet) {\n\t\t\t\tthis.duration *= firstElement.tripletMultiplier;\n\t\t\t}\n\t\t\tthis.duration = Math.round(this.duration*1000)/1000;\n\t\t} else\n\t\t\tthis.duration = 0;\n\t};\n\n\tBeamElem.prototype.setHint = function () {\n\t\tthis.hint = true;\n\t};\n\n\tBeamElem.prototype.add = function(abselem) {\n\t\tvar pitch = abselem.abcelem.averagepitch;\n\t\tif (pitch === undefined) return; // don't include elements like spacers in beams\n\t\tif (!abselem.abcelem.rest)\n\t\t\tthis.allrests = false;\n\t\tabselem.beam = this;\n\t\tthis.elems.push(abselem);\n\t\tthis.total = Math.round(this.total+pitch);\n\t\tif (this.min === undefined || abselem.abcelem.minpitch < this.min) {\n\t\t\tthis.min = abselem.abcelem.minpitch;\n\t\t}\n\t\tif (this.max === undefined || abselem.abcelem.maxpitch > this.max) {\n\t\t\tthis.max = abselem.abcelem.maxpitch;\n\t\t}\n\t};\n\n\tBeamElem.prototype.addBeam = function(beam) {\n\t\tthis.beams.push(beam);\n\t};\n\n\tBeamElem.prototype.calcDir = function() {\n\t\tthis.average = calcAverage(this.total, this.elems.length);\n\t\tif (this.forceup) {\n\t\t\tthis.stemsUp = true;\n\t\t} else if (this.forcedown) {\n\t\t\tthis.stemsUp = false;\n\t\t} else {\n\t\t\tvar middleLine = 6;\t// hardcoded 6 is B\n\t\t\tthis.stemsUp = this.average < middleLine; // true is up, false is down;\n\t\t}\n\t\tvar dir = this.stemsUp ? 'up' : 'down';\n\t\tfor (var i = 0; i < this.elems.length; i++) {\n\t\t\tfor (var j = 0; j < this.elems[i].heads.length; j++) {\n\t\t\t\tthis.elems[i].heads[j].stemDir = dir;\n\t\t\t}\n\t\t}\n\t};\n\nfunction calcAverage(total, numElements) {\n\tif (!numElements)\n\t\treturn 0;\n\treturn total / numElements;\n}\n\nmodule.exports = BeamElem;\n"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":34,"column":0},"generated":{"line":34,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":35,"column":0},"generated":{"line":35,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":36,"column":0},"generated":{"line":36,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":37,"column":0},"generated":{"line":37,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":38,"column":0},"generated":{"line":38,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":39,"column":0},"generated":{"line":39,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":40,"column":0},"generated":{"line":40,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":41,"column":0},"generated":{"line":41,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":42,"column":0},"generated":{"line":42,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":43,"column":0},"generated":{"line":43,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":44,"column":0},"generated":{"line":44,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":45,"column":0},"generated":{"line":45,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":46,"column":0},"generated":{"line":46,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":47,"column":0},"generated":{"line":47,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":48,"column":0},"generated":{"line":48,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":49,"column":0},"generated":{"line":49,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":50,"column":0},"generated":{"line":50,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":51,"column":0},"generated":{"line":51,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":52,"column":0},"generated":{"line":52,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":53,"column":0},"generated":{"line":53,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":54,"column":0},"generated":{"line":54,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":55,"column":0},"generated":{"line":55,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":56,"column":0},"generated":{"line":56,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":57,"column":0},"generated":{"line":57,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":58,"column":0},"generated":{"line":58,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":59,"column":0},"generated":{"line":59,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":60,"column":0},"generated":{"line":60,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":61,"column":0},"generated":{"line":61,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":62,"column":0},"generated":{"line":62,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":63,"column":0},"generated":{"line":63,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":64,"column":0},"generated":{"line":64,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":65,"column":0},"generated":{"line":65,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":66,"column":0},"generated":{"line":66,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":67,"column":0},"generated":{"line":67,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":68,"column":0},"generated":{"line":68,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":69,"column":0},"generated":{"line":69,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":70,"column":0},"generated":{"line":70,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":71,"column":0},"generated":{"line":71,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":72,"column":0},"generated":{"line":72,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":73,"column":0},"generated":{"line":73,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":74,"column":0},"generated":{"line":74,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":75,"column":0},"generated":{"line":75,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":76,"column":0},"generated":{"line":76,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":77,"column":0},"generated":{"line":77,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":78,"column":0},"generated":{"line":78,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":79,"column":0},"generated":{"line":79,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":80,"column":0},"generated":{"line":80,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":81,"column":0},"generated":{"line":81,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":82,"column":0},"generated":{"line":82,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":83,"column":0},"generated":{"line":83,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":84,"column":0},"generated":{"line":84,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":85,"column":0},"generated":{"line":85,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":86,"column":0},"generated":{"line":86,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":87,"column":0},"generated":{"line":87,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":88,"column":0},"generated":{"line":88,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":89,"column":0},"generated":{"line":89,"column":0}},{"source":"node_modules/abcjs/src/write/abc_beam_element.js","original":{"line":90,"column":0},"generated":{"line":90,"column":0}}],"sources":{"node_modules/abcjs/src/write/abc_beam_element.js":"//    abc_beam_element.js: Definition of the BeamElem class.\n\n// Most elements on the page are related to a particular absolute element -- notes, rests, bars, etc. Beams, however, span multiple elements.\n// This means that beams can't be laid out until the absolute elements are placed. There is the further complication that the stems for beamed\n// notes can't be laid out until the beams are because we don't know how long they will be until we know the slope of the beam and the horizontal\n// spacing of the absolute elements.\n//\n// So, when a beam is detected, a BeamElem is created, then all notes belonging to that beam are added to it. These notes are not given stems at that time.\n// Then, after the horizontal layout is complete, all of the BeamElem are iterated to set the beam position, then all of the notes that are beamed are given\n// stems. After that, we are ready for the drawing step.\n\n// There are three phases: the setup phase, when new elements are being discovered, the layout phase, when everything is calculated, and the drawing phase,\n// when the object is not changed, but is used to put the elements on the page.\n\n//\n// Setup phase\n//\nvar BeamElem = function BeamElem(stemHeight, type, flat, firstElement) {\n\t\t// type is \"grace\", \"up\", \"down\", or undefined. flat is used to force flat beams, as it commonly found in the grace notes of bagpipe music.\n\t\tthis.type = \"BeamElem\";\n\t\tthis.isflat = !!flat;\n\t\tthis.isgrace = !!(type && type === \"grace\");\n\t\tthis.forceup = !!(this.isgrace || (type && type === \"up\"));\n\t\tthis.forcedown = !!(type && type === \"down\");\n\t\tthis.elems = []; // all the AbsoluteElements that this beam touches. It may include embedded rests.\n\t\tthis.total = 0;\n\t\tthis.average = 6; // use middle line as start for average.\n\t\tthis.allrests = true;\n\t\tthis.stemHeight = stemHeight;\n\t\tthis.beams = []; // During the layout phase, this will become a list of the beams that need to be drawn.\n\t\tif (firstElement && firstElement.duration) {\n\t\t\tthis.duration = firstElement.duration;\n\t\t\tif (firstElement.startTriplet) {\n\t\t\t\tthis.duration *= firstElement.tripletMultiplier;\n\t\t\t}\n\t\t\tthis.duration = Math.round(this.duration*1000)/1000;\n\t\t} else\n\t\t\tthis.duration = 0;\n\t};\n\n\tBeamElem.prototype.setHint = function () {\n\t\tthis.hint = true;\n\t};\n\n\tBeamElem.prototype.add = function(abselem) {\n\t\tvar pitch = abselem.abcelem.averagepitch;\n\t\tif (pitch === undefined) return; // don't include elements like spacers in beams\n\t\tif (!abselem.abcelem.rest)\n\t\t\tthis.allrests = false;\n\t\tabselem.beam = this;\n\t\tthis.elems.push(abselem);\n\t\tthis.total = Math.round(this.total+pitch);\n\t\tif (this.min === undefined || abselem.abcelem.minpitch < this.min) {\n\t\t\tthis.min = abselem.abcelem.minpitch;\n\t\t}\n\t\tif (this.max === undefined || abselem.abcelem.maxpitch > this.max) {\n\t\t\tthis.max = abselem.abcelem.maxpitch;\n\t\t}\n\t};\n\n\tBeamElem.prototype.addBeam = function(beam) {\n\t\tthis.beams.push(beam);\n\t};\n\n\tBeamElem.prototype.calcDir = function() {\n\t\tthis.average = calcAverage(this.total, this.elems.length);\n\t\tif (this.forceup) {\n\t\t\tthis.stemsUp = true;\n\t\t} else if (this.forcedown) {\n\t\t\tthis.stemsUp = false;\n\t\t} else {\n\t\t\tvar middleLine = 6;\t// hardcoded 6 is B\n\t\t\tthis.stemsUp = this.average < middleLine; // true is up, false is down;\n\t\t}\n\t\tvar dir = this.stemsUp ? 'up' : 'down';\n\t\tfor (var i = 0; i < this.elems.length; i++) {\n\t\t\tfor (var j = 0; j < this.elems[i].heads.length; j++) {\n\t\t\t\tthis.elems[i].heads[j].stemDir = dir;\n\t\t\t}\n\t\t}\n\t};\n\nfunction calcAverage(total, numElements) {\n\tif (!numElements)\n\t\treturn 0;\n\treturn total / numElements;\n}\n\nmodule.exports = BeamElem;\n"},"lineCount":90}},"error":null,"hash":"f5e49d4fd0d087b49debec1c1a6b52f0","cacheData":{"env":{}}}